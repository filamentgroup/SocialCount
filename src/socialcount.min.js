(function(d,c,a){var b=window.Modernizr;a.socialCount=function(e,f){this.$el=a(f);this.$loadingIndicator=a("<div>").addClass("loading").html(b.cssanimations?new Array(4).join('<div class="dot"></div>'):"Loading");this._init(e)};a.socialCount.prototype={_init:function(e){this.options=a.extend({},a.socialCount.defaults,e);if(a.inArray("vk",this.options.socialSites)>=0){this.options.vkApiID=this.$el.data("vk-api")}this._constructButtons();this._initEvents()},_constructButtons:function(){this.socialButtons={};for(var f=0;f<this.options.socialSites.length;f++){var e=this.options.socialSites[f];var g=a("<li>").addClass(e).data("site",e).append(a("<a />").attr({href:this.options.sitesConfig[e].url,title:"Share on "+e}).text(this.options.sitesConfig[e].label).append(a("<div />").addClass("button")));this.socialButtons[e]=g;this.$el.append(g)}},_initEvents:function(){function e(k,h,i){var j=false,g=false,f=this;k.on("mouseenter",function(l){var m=a(this);m.addClass(f.options.classes.hover);g=true;a(document).on("mouseenter.socialcount mouseleave.socialcount",f.options.googleplusTooltip,function(n){j=n.type==="mouseenter";if(!j&&!g){m.removeClass(f.options.classes.hover)}})}).on("mouseleave",function(m){var l=this;window.setTimeout(function(){g=false;if(!j&&!g){a(document).off(".socialcount");a(l).closest("li").removeClass(f.options.classes.hover)}},0)});k.on(f.options.activateOnClick?"click":"mouseover",function(m){if(f.options.activateOnClick){m.preventDefault();m.stopPropagation()}var s=a(this),w=s.closest("ul"),n=encodeURI(w.data("url")||location.href),q=w.data("share-text")||document.title;if(s.data("cached")&&n==w.data("cached-url")&&q==w.data("cached-share-text")){return false}var o=s.data("site"),r,p,v=a.Deferred(),t=f.$loadingIndicator.clone(),u;switch(o){case"facebook":r='<iframe src="//www.facebook.com/plugins/like.php?href='+n+'&send=false&layout=button_count&width=100&show_faces=true&action=like&colorscheme=light&font=arial&height=21" scrolling="no" frameborder="0" style="border:none; overflow:hidden;" allowTransparency="true"></iframe>';break;case"twitter":r='<a href="https://twitter.com/share" class="twitter-share-button" data-url="'+n+'"'+(q?' data-text="'+q+'"':"")+' data-count="none" data-dnt="true">Tweet</a>';break;case"googleplus":r='<div class="g-plusone" data-size="medium" data-annotation="none" data-href="'+n+'"></div>';break;case"vk":r='<div id="'+f.options.vkElementID+'"></div>';break;case"odnoklassniki":r='<a target="_blank" class="mrc__plugin_uber_like_button" href="http://connect.mail.ru/share?url='+n+"\" data-mrc-config=\"{'cm' : '1', 'ck' : '1', 'sz' : '20', 'st' : '2', 'tp' : 'ok', 'width' : '100%'}\">Нравится</a>";break}var l=a(r);v.promise().always(function(){if(i&&typeof i==="function"){i(n,q)}var x=s.find("iframe");if(x.length){x.on("load",function(){t.remove()})}else{t.remove()}});s.addClass(f.options.classes.active).append(t).find(".button").html(l);w.data({"cached-url":n,"cached-share-text":q});s.data("cached",true);if(h&&!s.data("cached-script")){p=c.createElement("script");p.src=h;if(p.attachEvent){p.attachEvent("onreadystatechange",function(){if(p.readyState==="loaded"||p.readyState==="complete"){v.resolve()}})}else{a(p).on("load",v.resolve)}c.body.appendChild(p);s.data("cached-script",true)}else{v.resolve()}})}if("facebook" in this.socialButtons){e.call(this,this.socialButtons.facebook)}if("twitter" in this.socialButtons){e.call(this,this.socialButtons.twitter,"//platform.twitter.com/widgets.js")}if("googleplus" in this.socialButtons){e.call(this,this.socialButtons.googleplus,"//apis.google.com/js/plusone.js")}if("odnoklassniki" in this.socialButtons){e.call(this,this.socialButtons.odnoklassniki,"//cdn.connect.mail.ru/js/loader.js")}if("vk" in this.socialButtons){e.call(this,this.socialButtons.vk,"//vk.com/js/api/openapi.js",a.proxy(function(f,g){if(!VK._apiId){VK.init({apiId:this.options.vkApiID,onlyWidgets:true})}a("iframe[id*='vkwidget']").remove();VK.Widgets.Like(this.options.vkElementID,{type:"button",pageUrl:f,pageTitle:g})},this))}},changeInfo:function(e,f){if(e){this.$el.data("url",e)}if(f){this.$el.data("share-text",f)}if(e||f){this.removeCached()}},removeCached:function(){this.$el.children().removeData("cached")}};a.socialCount.defaults={classes:{active:"active",touch:"touch",hover:"hover",activateOnHover:"activate-on-hover",activateOnClick:"activate-on-click",},activateOnClick:false,socialSites:["facebook","twitter","googleplus","vk","odnoklassniki"],sitesConfig:{facebook:{label:"Like",url:"https://www.facebook.com/sharer/sharer.php"},twitter:{label:"Tweet",url:"https://twitter.com/intent/tweet"},googleplus:{label:"+1",url:"https://plus.google.com/share"},vk:{label:"Like",url:"https://vk.com/share.php"},odnoklassniki:{label:"Класс",url:"http://connect.mail.ru/share"}},googleplusTooltip:"table.gc-bubbleDefault",vkElementID:"vk_like"};a.fn.socialCount=function(f){if(typeof f==="string"){var e=Array.prototype.slice.call(arguments,1);this.each(function(){var g=a.data(this,"socialCount");if(!g){logError("cannot call methods on socialCount prior to initialization; attempted to call method '"+f+"'");return}if(!a.isFunction(g[f])||f.charAt(0)==="_"){logError("no such method '"+f+"' for socialCount instance");return}g[f].apply(g,e)})}else{this.each(function(){var g=a.data(this,"socialCount");if(g){g._init()}else{g=a.data(this,"socialCount",new a.socialCount(f,this))}})}return this}}(window,window.document,jQuery));